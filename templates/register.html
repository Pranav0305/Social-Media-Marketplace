{% extends "layout.html" %}
{% block title %}Register{% endblock %}

{% block content %}
<h2>Register</h2>

<!-- Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <p style="color: {% if category == 'danger' %}red{% else %}green{% endif %};">
                {{ message }}
            </p>
        {% endfor %}
    {% endif %}
{% endwith %}

<form id="registerForm" method="POST" enctype="multipart/form-data">
    <!-- CSRF Protection -->
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <label for="username">Username:</label>
    <input type="text" id="username" name="username" required><br><br>

    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required><br><br>

    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required><br>

    <!-- Password Strength Rules -->
    <div id="password-rules">
        <p>Password must contain:</p>
        <ul>
            <li id="length-rule" style="color:red;">✅ At least 8 characters</li>
            <li id="uppercase-rule" style="color:red;">✅ One uppercase letter (A-Z)</li>
            <li id="lowercase-rule" style="color:red;">✅ One lowercase letter (a-z)</li>
            <li id="number-rule" style="color:red;">✅ One number (0-9)</li>
            <li id="special-rule" style="color:red;">✅ One special character (!@#$%^&*)</li>
        </ul>
    </div>
    <br>

    <label for="document">Upload Verification Document:</label>
    <input type="file" id="document" name="document" accept=".png, .jpg, .jpeg, .pdf" required><br><br>

    <button type="submit">Register</button>
</form>

<!-- Footer Link -->
<p>Already have an account? <a href="{{ url_for('auth.login') }}">Login here</a></p>

<script src="{{ url_for('static', filename='js/register.js') }}"></script>

{% endblock %}